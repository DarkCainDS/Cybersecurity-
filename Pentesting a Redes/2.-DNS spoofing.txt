DNS Spoofing en 2022: En mi caso para que funcione el ataque tuve que realizar configuraciones extra para que Ettercap no crashee:


#Estando como sudo

#Cambiar "enp2s0" porel nombre de tu interfaz de red.
echo 0 > /proc/sys/net/ipv6/conf/enp2s0/use_tempaddr

#Habilitamos el reenvío de paquetes en el sistema. 
echo 1 > /proc/sys/net/ipv4/ip_forward
Tambien, en el archivo "/etc/ettercap/etter.conf" hay que descomentar las lineas de redireccion IPv6:


#---------------
#     Linux 
#---------------

   redir_command_on = "iptables -t nat -A PREROUTING -i %iface -p tcp -d %destination --dport %port -j REDIRECT --to-port %rport"
   redir_command_off = "iptables -t nat -D PREROUTING -i %iface -p tcp -d %destination --dport %port -j REDIRECT --to-port %rport"

# pendant for IPv6 - Note that you need iptables v1.4.16 or newer to use IPv6 redirect
   redir6_command_on = "ip6tables -t nat -A PREROUTING -i %iface -p tcp -d %destination --dport %port -j REDIRECT --to-port %rport"
   redir6_command_off = "ip6tables -t nat -D PREROUTING -i %iface -p tcp -d %destination --dport %port -j REDIRECT --to-port %rport"
Así y todo el ataque tiene problemas a la hora de spoofear paginas que tengan certificado SSL.


Buen día, Me ha sucedido lo mismo y la forma en la que lo solucione fue la siguiente:

Ejecuta Ettercap
Selecciona la opcion Sniffing
Stop Sniffig tal cual como lo hace el Mentor
Edita los archivos de Etter tal cual como lo hace el mentor.
En el archivo Etter.conf (el apartado de ec_uid,ec_gid = 0, tal cual como lo tiene el Mentor), en el apartado de Linux, seccion iptables, inserta el siguiente codigo:

redir_command_on = "iptable -t nat -A PREROUTING -i %iface -p tcp --dport %port -j REDIRECT --to-port %rport"

redir_command_off = "iptable -t nat -D PREROUTING -i %iface -p tcp --dport %port -j REDIRECT --to-port %rport"
NOTA: Comenta los demas, tal cual como los hace el profe.

Sigue con los demas pasos del Mentor.
Espero te funcione. Saludos!